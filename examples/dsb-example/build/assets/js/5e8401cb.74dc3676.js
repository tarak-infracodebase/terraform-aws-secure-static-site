"use strict";(self.webpackChunkdevsecblueprint=self.webpackChunkdevsecblueprint||[]).push([[8427],{8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>t});var s=i(6540);const o={},r=s.createContext(o);function l(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),s.createElement(r.Provider,{value:n},e.children)}},8671:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"projects/devsecops-pipeline-gha/code-breakdown/devsecops-gha-code","title":"DevSecOps GitHub Actions Code - Explained","description":"Overview","source":"@site/docs/projects/devsecops-pipeline-gha/code-breakdown/devsecops-pipeline.md","sourceDirName":"projects/devsecops-pipeline-gha/code-breakdown","slug":"/projects/devsecops-pipeline-gha/code-breakdown/devsecops-gha-code","permalink":"/projects/devsecops-pipeline-gha/code-breakdown/devsecops-gha-code","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"devsecops-gha-code","title":"DevSecOps GitHub Actions Code - Explained","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Code Breakdown","permalink":"/category/code-breakdown-3"},"next":{"title":"Application Code - Explained","permalink":"/projects/devsecops-pipeline-gha/code-breakdown/application-code"}}');var o=i(4848),r=i(8453);const l={id:"devsecops-gha-code",title:"DevSecOps GitHub Actions Code - Explained",sidebar_position:1},t=void 0,c={},d=[{value:"Overview",id:"overview",level:2},{value:"Code Overview",id:"code-overview",level:2},{value:"Main Workflow",id:"main-workflow",level:3},{value:"PR Workflow",id:"pr-workflow",level:3},{value:"Build Image Workflow",id:"build-image-workflow",level:3},{value:"Linting and Formatting Workflow",id:"linting-and-formatting-workflow",level:3},{value:"Unit &amp; Security Test Workflow",id:"unit--security-test-workflow",level:3},{value:"Push Docker Image Workflow",id:"push-docker-image-workflow",level:3}];function a(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(n.p,{children:"Alright, now that you\u2019ve seen how the pipeline flows and what tools we\u2019re using, let\u2019s take a step back and walk through how this thing is actually put together. This section gives you a breakdown of each workflow file so you know what\u2019s going on under the hood, and how everything ties together to give us a secure, automated CI/CD setup using GitHub Actions."}),"\n",(0,o.jsx)(n.h2,{id:"code-overview",children:"Code Overview"}),"\n",(0,o.jsxs)(n.p,{children:["All of the workflow logic lives inside the ",(0,o.jsx)(n.code,{children:".github/workflows"})," folder. Each file in this directory is responsible for a specific part of the pipeline\u2014building images, running tests, scanning for vulnerabilities, and pushing to registries. The real magic happens in the ",(0,o.jsx)(n.code,{children:"main.yml"})," and ",(0,o.jsx)(n.code,{children:"pr.yml"})," files, which orchestrate the order of operations depending on whether code is being pushed to main or coming in through a pull request."]}),"\n",(0,o.jsx)(n.h3,{id:"main-workflow",children:"Main Workflow"}),"\n",(0,o.jsxs)(n.p,{children:["This is the primary CI/CD pipeline that runs on every push to the ",(0,o.jsx)(n.code,{children:"main"})," branch or when manually triggered. It chains together the full DevSecOps flow\u2014building the image, checking code quality, running tests and security scans, and pushing the Docker image."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"File"}),": ",(0,o.jsx)(n.code,{children:"main.yml"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Triggers on push to ",(0,o.jsx)(n.code,{children:"main"})," or manual invocation"]}),"\n",(0,o.jsxs)(n.li,{children:["Sequentially calls ",(0,o.jsx)(n.code,{children:"build-image"}),", ",(0,o.jsx)(n.code,{children:"lint-format"}),", ",(0,o.jsx)(n.code,{children:"unit-sec-test"}),", and ",(0,o.jsx)(n.code,{children:"push-docker-image"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"pr-workflow",children:"PR Workflow"}),"\n",(0,o.jsx)(n.p,{children:"This workflow runs when a pull request is opened, edited, or synchronized. It runs a subset of the pipeline to validate incoming changes before merging."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"File"}),": ",(0,o.jsx)(n.code,{children:"pr.yml"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Triggers on pull request events"}),"\n",(0,o.jsxs)(n.li,{children:["Executes ",(0,o.jsx)(n.code,{children:"build-image"}),", followed by ",(0,o.jsx)(n.code,{children:"lint-format"}),", and then ",(0,o.jsx)(n.code,{children:"unit-sec-test"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"build-image-workflow",children:"Build Image Workflow"}),"\n",(0,o.jsx)(n.p,{children:"This workflow builds the Docker image from the current application source. It is invoked by both the main and PR workflows as an early validation step."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"File"}),": ",(0,o.jsx)(n.code,{children:"build-image.yml"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Builds a Docker image using the application code"}),"\n",(0,o.jsx)(n.li,{children:"Tags the image with the commit SHA"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"linting-and-formatting-workflow",children:"Linting and Formatting Workflow"}),"\n",(0,o.jsxs)(n.p,{children:["This workflow ensures Python code quality and consistency by running ",(0,o.jsx)(n.code,{children:"pylint"})," and ",(0,o.jsx)(n.code,{children:"black"}),". It enforces coding standards before proceeding to tests or deployment."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"File"}),": ",(0,o.jsx)(n.code,{children:"lint-format.yml"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Runs ",(0,o.jsx)(n.code,{children:"pylint"})," on the codebase"]}),"\n",(0,o.jsxs)(n.li,{children:["Runs ",(0,o.jsx)(n.code,{children:"black"})," to check for proper code formatting"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"unit--security-test-workflow",children:"Unit & Security Test Workflow"}),"\n",(0,o.jsx)(n.p,{children:"This workflow runs unit tests and performs two types of container security scans\u2014Trivy for static analysis and ZAP by Checkmarx for dynamic application testing."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"File"}),": ",(0,o.jsx)(n.code,{children:"unit-sec-test.yml"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Unit tests"}),": Executes pytest after installing dependencies"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Trivy scans"}),": Detects high/critical vulnerabilities in the built Docker image"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"ZAP by Checkmarx"}),": Runs a DAST scan against the running container"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"push-docker-image-workflow",children:"Push Docker Image Workflow"}),"\n",(0,o.jsx)(n.p,{children:"This workflow builds and tags a Docker image, then pushes it to GitHub Container Registry (GHCR). It's triggered after all validations have passed."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"File"}),": ",(0,o.jsx)(n.code,{children:"push-docker-image.yml"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Builds the image"}),"\n",(0,o.jsxs)(n.li,{children:["Tags it with the commit SHA, which is ",(0,o.jsx)(n.code,{children:"latest"})]}),"\n",(0,o.jsx)(n.li,{children:"Pushes to GHCR"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Once you understand the purpose and layout of these Terraform configs, you'll have a solid grasp on how the DevSecOps pipeline works from spinning up infrastructure to running secure, automated CI/CD workflows."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}}}]);