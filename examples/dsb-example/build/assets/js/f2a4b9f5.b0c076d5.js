"use strict";(self.webpackChunkdevsecblueprint=self.webpackChunkdevsecblueprint||[]).push([[2872],{4106:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"projects/devsecops-pipeline-gcp/code-breakdown/application-code","title":"Application Code - Explained","description":"Overview","source":"@site/docs/projects/devsecops-pipeline-gcp/code-breakdown/application.md","sourceDirName":"projects/devsecops-pipeline-gcp/code-breakdown","slug":"/projects/devsecops-pipeline-gcp/code-breakdown/application-code","permalink":"/projects/devsecops-pipeline-gcp/code-breakdown/application-code","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"application-code","title":"Application Code - Explained","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Code Breakdown","permalink":"/category/code-breakdown-2"},"next":{"title":"DevSecOps Terraform Code - Explained","permalink":"/projects/devsecops-pipeline-gcp/code-breakdown/devsecops-terraform-code"}}');var s=i(4848),r=i(8453);const o={id:"application-code",title:"Application Code - Explained",sidebar_position:2},a=void 0,c={},l=[{value:"Overview",id:"overview",level:2},{value:"Defining GCP-FastAPI",id:"defining-gcp-fastapi",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Features",id:"features",level:3},{value:"Project Structure",id:"project-structure",level:3},{value:"Setup and Installation",id:"setup-and-installation",level:3},{value:"1. Clone the Repository",id:"1-clone-the-repository",level:4},{value:"2. Build the Docker Image",id:"2-build-the-docker-image",level:4},{value:"3. Run the Docker Container",id:"3-run-the-docker-container",level:4},{value:"4. Access the Application",id:"4-access-the-application",level:4},{value:"Dependencies",id:"dependencies",level:3},{value:"Notes",id:"notes",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"This section provides a detailed explanation of the application's codebase. The project is a simple Python-based FastAPI application that can be run locally or containerized for deployment. Its primary purpose is to demonstrate a secure and automated DevSecOps pipeline while highlighting potential vulnerabilities for testing purposes."}),"\n",(0,s.jsx)(n.h2,{id:"defining-gcp-fastapi",children:"Defining GCP-FastAPI"}),"\n",(0,s.jsx)(n.p,{children:"The project sets up a FastAPI application inside a Docker container. It uses the official Python runtime and includes all the necessary configurations to deploy the app efficiently. Upon starting, the container automatically runs the FastAPI app, exposing it on port 80."}),"\n",(0,s.jsxs)(n.p,{children:["The goal of this project is to push it through a DevSecOps pipeline, as it intentionally contains some vulnerabilities. For more details, you can review the code in the ",(0,s.jsx)(n.a,{href:"https://github.com/devsecblueprint/gcp-fastapi/blob/main/main.py",children:"main.py"})," file."]}),"\n",(0,s.jsx)(n.h3,{id:"requirements",children:"Requirements"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Docker"}),": For containerizing and running the application."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Python 3.12+"}),": The latest stable version ensures compatibility with modern features."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"FastAPI"}),": Framework for building the API."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Uvicorn"}),": ASGI server for running the application."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"features",children:"Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Dockerized Application"}),": Simplifies deployment using containers."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Python 3.12.5 Runtime"}),": Ensures compatibility with the latest features and security patches."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Optimized Dependency Installation"}),": Leverages ",(0,s.jsx)(n.code,{children:"requirements.txt"})," for streamlined package management."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"project-structure",children:"Project Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gcp-fastapi/\r\n\u251c\u2500\u2500 Dockerfile         # Configuration for the Docker container\r\n\u251c\u2500\u2500 requirements.txt   # Python dependencies\r\n\u251c\u2500\u2500 main.py            # Entry point for the FastAPI app (contains sample vulnerabilities)\r\n\u2514\u2500\u2500 ...\n"})}),"\n",(0,s.jsx)(n.h3,{id:"setup-and-installation",children:"Setup and Installation"}),"\n",(0,s.jsx)(n.h4,{id:"1-clone-the-repository",children:"1. Clone the Repository"}),"\n",(0,s.jsx)(n.p,{children:"Clone the project repository using the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/your-username/gcp-fastapi.git\r\ncd gcp-fastapi\n"})}),"\n",(0,s.jsx)(n.h4,{id:"2-build-the-docker-image",children:"2. Build the Docker Image"}),"\n",(0,s.jsx)(n.p,{children:"Run the following command in the project root to build the Docker image:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker build -t gcp-fastapi .\n"})}),"\n",(0,s.jsx)(n.h4,{id:"3-run-the-docker-container",children:"3. Run the Docker Container"}),"\n",(0,s.jsx)(n.p,{children:"After building the image, start the container:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker run -d -p 80:80 gcp-fastapi\n"})}),"\n",(0,s.jsx)(n.p,{children:"This command will start the FastAPI app on port 80 of your localhost."}),"\n",(0,s.jsx)(n.h4,{id:"4-access-the-application",children:"4. Access the Application"}),"\n",(0,s.jsx)(n.p,{children:"Once the container is running, you can access the application in your browser:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"http://localhost:80\n"})}),"\n",(0,s.jsx)(n.h3,{id:"dependencies",children:"Dependencies"}),"\n",(0,s.jsxs)(n.p,{children:["The application relies on the following Python packages, specified in the ",(0,s.jsx)(n.code,{children:"requirements.txt"})," file:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"fastapi"}),": The main framework for building APIs."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"uvicorn"}),": The ASGI server for running the application."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"To install these dependencies locally, run:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pip install -r requirements.txt\n"})}),"\n",(0,s.jsx)(n.h3,{id:"notes",children:"Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The default entry point for the FastAPI application is ",(0,s.jsx)(n.code,{children:"main.py"}),", where the application instance is named ",(0,s.jsx)(n.code,{children:"app"}),". If your setup differs, update the ",(0,s.jsx)(n.code,{children:"CMD"})," directive in the Dockerfile accordingly."]}),"\n",(0,s.jsxs)(n.li,{children:["By default, the container exposes the application on port 80. To use a different port, modify the ",(0,s.jsx)(n.code,{children:"EXPOSE"})," and ",(0,s.jsx)(n.code,{children:"CMD"})," directives in the Dockerfile as needed."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This straightforward setup ensures you can run, test, and deploy the FastAPI application with minimal effort while integrating it into a secure DevSecOps pipeline."})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var t=i(6540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);