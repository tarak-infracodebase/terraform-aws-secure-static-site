"use strict";(self.webpackChunkdevsecblueprint=self.webpackChunkdevsecblueprint||[]).push([[5819],{1348:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"projects/devsecops-home-lab/installation-and-configuration/monitoring-tools/install-config-prometheus","title":"Prometheus","description":"Overview","source":"@site/docs/projects/devsecops-home-lab/installation-and-configuration/monitoring-tools/prometheus.md","sourceDirName":"projects/devsecops-home-lab/installation-and-configuration/monitoring-tools","slug":"/projects/devsecops-home-lab/installation-and-configuration/monitoring-tools/install-config-prometheus","permalink":"/pt-BR/projects/devsecops-home-lab/installation-and-configuration/monitoring-tools/install-config-prometheus","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"install-config-prometheus","title":"Prometheus","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Grafana","permalink":"/pt-BR/projects/devsecops-home-lab/installation-and-configuration/monitoring-tools/install-config-grafana"},"next":{"title":"Setting Up Pipeline and Repository","permalink":"/pt-BR/category/setting-up-pipeline-and-repository"}}');var o=s(4848),i=s(8453);const t={id:"install-config-prometheus",title:"Prometheus",sidebar_position:4},l=void 0,a={},c=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation Steps",id:"installation-steps",level:2},{value:"You&#39;re Done",id:"youre-done",level:2}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["This installation happens on the ",(0,o.jsx)(n.code,{children:"dsb-node-01"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["According to ",(0,o.jsx)(n.a,{href:"https://prometheus.io/docs/introduction/overview/",children:"Prometheus' Website"}),", Prometheus is an open-source systems monitoring and alerting toolkit originally built at SoundCloud. It is designed for reliability and scalability, collecting metrics from configured targets at given intervals, evaluating rule expressions, displaying the results, and triggering alerts if needed. This guide will walk you through the steps to install and configure Prometheus using Docker Compose on your system."]}),"\n",(0,o.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Install Docker"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Install Docker using Snap:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo snap install docker\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Create Docker Group and Add User to It"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Create a Docker group and add your user to it:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"sudo groupadd docker\r\nsudo usermod -aG docker $USER\r\nsudo reboot\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"installation-steps",children:"Installation Steps"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Create a Docker-Compose File for Prometheus"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Create the necessary directories and Docker Compose file:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/apps/prometheus\r\ntouch ~/apps/prometheus/docker-compose.yml\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Copy and Save the Docker-Compose Configuration"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Use the following configuration in your ",(0,o.jsx)(n.code,{children:"docker-compose.yml"})," file:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'version: "3.7"\r\n\r\nservices:\r\n  prometheus:\r\n    image: prom/prometheus:latest\r\n    container_name: prometheus\r\n    volumes:\r\n      - prometheus_data:/prometheus\r\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\r\n    ports:\r\n      - "9090:9090"\r\n    restart: always\r\n    network_mode: host\r\n\r\nvolumes:\r\n  prometheus_data:\n'})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Open the file with nano or your preferred text editor and paste the configuration:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"nano ~/apps/prometheus/docker-compose.yml\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Save and close the file."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Create a Custom ",(0,o.jsx)(n.code,{children:"prometheus.yml"})," File"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Create the ",(0,o.jsx)(n.code,{children:"prometheus.yml"})," file in the Prometheus directory:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"touch ~/apps/prometheus/prometheus.yml\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Add the following configuration to the ",(0,o.jsx)(n.code,{children:"prometheus.yml"})," file:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'global:\r\n  scrape_interval: 15s\r\n  evaluation_interval: 15s\r\n\r\nscrape_configs:\r\n  - job_name: "cadvisor"\r\n    static_configs:\r\n      - targets: ["localhost:8080"]\r\n\r\n  - job_name: "node_exporter"\r\n    static_configs:\r\n      - targets: ["localhost:9100"]\r\n\r\n  - job_name: "jenkins"\r\n    metrics_path: /prometheus/\r\n    static_configs:\r\n      - targets: ["<your_ip_address>:8080"]\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["This configuration sets up Prometheus to scrape metrics from cAdvisor, Node Exporter, and Jenkins. Replace ",(0,o.jsx)(n.code,{children:"<your_ip_address>"})," with the actual IP address of your Jenkins server."]})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Run Prometheus with Docker-Compose"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Navigate to the Prometheus directory and run the container:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cd ~/apps/prometheus\r\ndocker-compose up -d\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Confirm Prometheus is Running"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Check if Prometheus is up and running by visiting ",(0,o.jsx)(n.code,{children:"http://localhost:9090"})," in your web browser."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Prometheus Dashboard",src:s(4852).A+"",width:"1093",height:"500"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"youre-done",children:"You're Done"}),"\n",(0,o.jsx)(n.p,{children:"You\u2019ve successfully installed and configured Prometheus on your system. Your Prometheus server is now up and running, ready to scrape metrics from the configured targets and provide insights into your system\u2019s performance and health."})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},4852:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/prometheus-dashboard-40f9f3f23112220b8e6317a0251f3710.png"},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var r=s(6540);const o={},i=r.createContext(o);function t(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);