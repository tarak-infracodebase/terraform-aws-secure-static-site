"use strict";(self.webpackChunkdevsecblueprint=self.webpackChunkdevsecblueprint||[]).push([[9555],{3112:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"projects/devsecops-home-lab/installation-and-configuration/install-config-jenkins","title":"Jenkins","description":"Overview","source":"@site/docs/projects/devsecops-home-lab/installation-and-configuration/jenkins.md","sourceDirName":"projects/devsecops-home-lab/installation-and-configuration","slug":"/projects/devsecops-home-lab/installation-and-configuration/install-config-jenkins","permalink":"/ja/projects/devsecops-home-lab/installation-and-configuration/install-config-jenkins","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"install-config-jenkins","title":"Jenkins","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Gitea","permalink":"/ja/projects/devsecops-home-lab/installation-and-configuration/install-config-gitea"},"next":{"title":"Nexus","permalink":"/ja/projects/devsecops-home-lab/installation-and-configuration/install-config-nexus"}}');var r=s(4848),l=s(8453);const t={id:"install-config-jenkins",title:"Jenkins",sidebar_position:3},a=void 0,d={},o=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation Steps",id:"installation-steps",level:2},{value:"Configuration Steps",id:"configuration-steps",level:2},{value:"Installing Jenkins Node",id:"installing-jenkins-node",level:2},{value:"You&#39;re Done",id:"youre-done",level:2}];function c(n){const e={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:["This installation happens on the ",(0,r.jsx)(e.code,{children:"dsb-hub"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["According to ",(0,r.jsx)(e.a,{href:"https://www.jenkins.io/doc/#what-is-jenkins",children:"Jenkins User Documentation"}),", Jenkins is a self-contained, open source automation server which can be used to automate all sorts of tasks related to building, testing, and delivering or deploying software. It's a CI/CD platform."]}),"\n",(0,r.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Install Java"})}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"Before installing Jenkins, ensure that Java is installed on your system:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Update your package manager and install Java:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo apt update\r\nsudo apt install fontconfig openjdk-17-jre\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"installation-steps",children:"Installation Steps"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Configure the Package Manager and Install Jenkins"})}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Add Jenkins to your package manager by downloading and installing the Jenkins key:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo wget -O /usr/share/keyrings/jenkins-keyring.asc https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Add the Jenkins repository to your sources list:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'echo "deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] https://pkg.jenkins.io/debian-stable binary/" | sudo tee /etc/apt/sources.list.d/jenkins.list > /dev/null\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Update your package list and install Jenkins:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo apt-get update\r\nsudo apt-get install jenkins\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Enable and Start Jenkins"})}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Enable Jenkins to start on boot:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo systemctl enable jenkins\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Start Jenkins:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo systemctl start jenkins\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Verify Jenkins is Running"})}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Check the status of Jenkins to ensure it's active:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo systemctl status jenkins\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"You should see output similar to the following if Jenkins is up and running:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"\u25cf jenkins.service - Jenkins Continuous Integration Server\r\n   Loaded: loaded (/usr/lib/systemd/system/jenkins.service; enabled; preset: enabled)\r\n   Active: active (running) since [DATE]; [TIME] ago\r\n   Main PID: 9188 (java)\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"configuration-steps",children:"Configuration Steps"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Access Jenkins via Web Browser"})}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Open your web browser and go to:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"http://your_ip:8080\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"You should see the Jenkins setup screen."}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"Jenkins Setup",src:s(5939).A+"",width:"2258",height:"1550"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Retrieve the Initial Admin Password"})}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"To proceed with the setup, you will need the initial admin password. Retrieve it by running the following command on your server:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo cat /var/lib/jenkins/secrets/initialAdminPassword\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Copy the password and enter it in the password box on the web interface."}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"Initial Admin Password",src:s(4794).A+"",width:"2220",height:"1386"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Install Suggested Plugins"})}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["After entering the admin password, click ",(0,r.jsx)(e.strong,{children:"Install suggested plugins"})," and allow Jenkins to install the necessary plugins."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"Install Plugins",src:s(3670).A+"",width:"2082",height:"1364"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Set Up Your Admin Account"})}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"After the plugins are installed, you\u2019ll be prompted to set up your admin account. Enter your IP details and set up your Jenkins instance."}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"Admin Setup",src:s(3943).A+"",width:"2082",height:"1360"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Configure Instance IP"})}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["After you enter your admin information, set the URL IP address of your instance or press ",(0,r.jsx)(e.code,{children:"Not Now"}),"."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"Configure Instance",src:s(8482).A+"",width:"2108",height:"1388"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Navigate to the home page"})}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"You should be here now."}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"Home Page",src:s(4965).A+"",width:"2568",height:"1368"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"installing-jenkins-node",children:"Installing Jenkins Node"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:["This section covers installing and configuring a Jenkins node on ",(0,r.jsx)(e.code,{children:"dsb-node-01"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Create Jenkins User"})}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Create a Jenkins user and set appropriate permissions:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo adduser jenkins\r\nsudo chown -R jenkins:jenkins /home/jenkins\r\nsudo chmod 755 /home/jenkins\r\nsudo usermod -aG docker jenkins\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Install Java"})}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Install Java on the Jenkins node:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo apt install openjdk-17-jre-headless\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Configure the Jenkins Node in Jenkins UI"})}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["In Jenkins UI, navigate to ",(0,r.jsx)(e.strong,{children:"Dashboard > Manage Jenkins > Nodes"}),". Click on ",(0,r.jsx)(e.strong,{children:"New Node"}),". Select ",(0,r.jsx)(e.strong,{children:"Permanent Agent"})," and click ",(0,r.jsx)(e.strong,{children:"OK"}),"."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"Node Configuration",src:s(8427).A+"",width:"1182",height:"629"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["For your agent, configure the ",(0,r.jsx)(e.strong,{children:"Remote root directory"})," to ",(0,r.jsx)(e.code,{children:"/home/jenkins/agent"})," and save the configuration."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Configure Jenkins Security for Agents"})}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["In Jenkins UI, navigate to ",(0,r.jsx)(e.strong,{children:"Dashboard > Manage Jenkins > Security"}),", and scroll down until you see ",(0,r.jsx)(e.strong,{children:"TCP ports for inbound agents"}),". Select ",(0,r.jsx)(e.strong,{children:"Random"}),". Apply/Save."]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"Security Configuration",src:s(6226).A+"",width:"697",height:"925"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Set Up the Jenkins Node"})}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["On ",(0,r.jsx)(e.code,{children:"dsb-node-01"}),", create the agent directory:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"cd /home/jenkins && mkdir agent\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Download the Jenkins agent JAR file:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"wget http://<jenkins-server-url>/jnlpJars/agent.jar\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Run the Jenkins agent:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'java -jar agent.jar -jnlpUrl http://<jenkins-server-url>/computer/<node-name>/slave-agent.jnlp -secret <secret-key> -workDir "/home/jenkins/agent"\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.admonition,{type:"note",children:(0,r.jsx)(e.p,{children:"You can find the secret key on the Jenkins node configuration page."})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{alt:"Secret Key Location",src:s(3271).A+"",width:"1514",height:"284"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Create a Systemd Service for the Jenkins Agent"})}),"\n"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Create a new systemd service for the Jenkins agent:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo nano /etc/systemd/system/jenkins-agent.service\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Add the following configuration to the service file:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-ini",children:"[Unit]\r\nDescription=Jenkins Agent\r\n\r\n[Service]\r\nUser=jenkins\r\nGroup=jenkins\r\nExecStart=/usr/bin/java -jar /home/jenkins/agent/agent.jar -jnlpUrl http://<jenkins-server-url>/computer/<node-name>/slave-agent.jnlp -secret <secret-key> -workDir /home/jenkins/agent\r\nRestart=always\r\n\r\n[Install]\r\nWantedBy=multi-user.target\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Reload systemd and start the Jenkins agent service:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"sudo systemctl daemon-reload\r\nsudo systemctl start jenkins-agent\r\nsudo systemctl enable jenkins-agent\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"youre-done",children:"You're Done"}),"\n",(0,r.jsx)(e.p,{children:"You're finished setting up Jenkins on your machine!"})]})}function h(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(c,{...n})}):c(n)}},3271:(n,e,s)=>{s.d(e,{A:()=>i});const i=s.p+"assets/images/jenkins-node-cmd-3d716977982fbacefd5669167c8dbf0b.png"},3670:(n,e,s)=>{s.d(e,{A:()=>i});const i=s.p+"assets/images/jenkins-install-suggested-plugins-e48c35365d327b9ef0402dab282d9447.png"},3943:(n,e,s)=>{s.d(e,{A:()=>i});const i=s.p+"assets/images/jenkins-admin-user-bb561db11210d47e0c565a2fd1792445.png"},4794:(n,e,s)=>{s.d(e,{A:()=>i});const i=s.p+"assets/images/jenkins-init-password-7939d4c52f8ed336d1d6dcf6f625c61e.png"},4965:(n,e,s)=>{s.d(e,{A:()=>i});const i=s.p+"assets/images/jenkins-home-1704cfcfcffa2c0868578813b804518b.png"},5939:(n,e,s)=>{s.d(e,{A:()=>i});const i=s.p+"assets/images/jenkins-init-config-7ab41a25cf6d01b3ead855daf2ea886f.png"},6226:(n,e,s)=>{s.d(e,{A:()=>i});const i=s.p+"assets/images/jenkins-node-conf-security-69c5de7ab41aa1daccc5bfa01a6adbf8.png"},8427:(n,e,s)=>{s.d(e,{A:()=>i});const i=s.p+"assets/images/jenkins-create-node-22cc8be754adc0404a951f92e9c66595.png"},8453:(n,e,s)=>{s.d(e,{R:()=>t,x:()=>a});var i=s(6540);const r={},l=i.createContext(r);function t(n){const e=i.useContext(l);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:t(n.components),i.createElement(l.Provider,{value:e},n.children)}},8482:(n,e,s)=>{s.d(e,{A:()=>i});const i=s.p+"assets/images/jenkins-instance-config-2f2976dc3fef586f7830c5691e667e04.png"}}]);