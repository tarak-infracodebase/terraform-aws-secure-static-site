"use strict";(self.webpackChunkdevsecblueprint=self.webpackChunkdevsecblueprint||[]).push([[6290],{251:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/image-9-f0992c9ef6e92e41f2d75f4863ab778f.png"},1599:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"projects/devsecops-pipeline-azure/setup/config-secrets","title":"Configuring Secrets & Environment Variables","description":"Overview","source":"@site/docs/projects/devsecops-pipeline-azure/setup/secrets-configuration.md","sourceDirName":"projects/devsecops-pipeline-azure/setup","slug":"/projects/devsecops-pipeline-azure/setup/config-secrets","permalink":"/fr/projects/devsecops-pipeline-azure/setup/config-secrets","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"config-secrets","title":"Configuring Secrets & Environment Variables","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Setting Up Azure DevOps","permalink":"/fr/projects/devsecops-pipeline-azure/setup/setup-azure-devops"},"next":{"title":"Code Breakdown","permalink":"/fr/category/code-breakdown-1"}}');var s=i(4848),t=i(8453);const o={id:"config-secrets",title:"Configuring Secrets & Environment Variables",sidebar_position:5},l=void 0,c={},a=[{value:"Overview",id:"overview",level:2},{value:"Terraform Cloud Configuration",id:"terraform-cloud-configuration",level:2},{value:"GitHub Configuration",id:"github-configuration",level:2},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"With your deployment principals created, the next step is wiring up secrets and environment variables so Terraform Cloud and GitHub Actions can authenticate securely. This ensures your pipeline can provision resources and trigger deployments without exposing sensitive credentials."}),"\n",(0,s.jsx)(n.p,{children:"In this section, you\u2019ll configure:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Terraform Cloud Variable Sets"})," for managing environment variables at the organization level."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"GitHub Repository Secrets"})," for authenticating pipelines."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"terraform-cloud-configuration",children:"Terraform Cloud Configuration"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Log in to ",(0,s.jsx)(n.strong,{children:"Terraform Cloud"})," and select your ",(0,s.jsx)(n.strong,{children:"DSB"})," organization."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["From the left-hand menu, go to ",(0,s.jsx)(n.strong,{children:"Settings"})," \u2192 ",(0,s.jsx)(n.strong,{children:"Variable Sets"}),". You\u2019ll see a page like this:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Variable Sets",src:i(3953).A+"",width:"890",height:"345"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Click ",(0,s.jsx)(n.strong,{children:"Create Organization Variable Set"})," and fill out the details:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Name"}),": Something descriptive (e.g., ",(0,s.jsx)(n.code,{children:"Azure Deployment Variables"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Description"}),": Add a short explanation for clarity."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Variable Set Scope"}),": Select ",(0,s.jsx)(n.strong,{children:"Apply to all projects and workspaces"}),". (This can be narrowed later if needed.)"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Under the ",(0,s.jsx)(n.strong,{children:"Variables"})," section, click ",(0,s.jsx)(n.strong,{children:"Add Variable"})," and define the following keys. Be sure to set each one as an ",(0,s.jsx)(n.strong,{children:"Environment Variable"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TFC_AZ_CLIENT_ID"}),": Application ID of the Terraform Deployment Service Principal"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TFC_AZ_CLIENT_PASSWORD"}),": Client Secret value of the Terraform Deployment Service Principal"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TFC_AZ_DEVOPS_GITHUB_PAT"}),": GitHub PAT generated earlier"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TFC_AZ_DEVOPS_ORG_SERVICE_URL"}),": ",(0,s.jsx)(n.code,{children:"https://dev.azure.com/your_organization"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TFC_AZ_DEVOPS_PAT"}),": Azure DevOps PAT you created earlier"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TFC_AZ_SUBSCRIPTION_NAME"}),": Subscription Name"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TFC_AZ_SUBSCRIPTION_ID"}),": Subscription ID of your default subscription"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TFC_AZ_TENANT_ID"}),": Directory (Tenant) ID of the Terraform Service Principal"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Once complete, your variable set should look something like this:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Terraform Cloud Variable Set",src:i(251).A+"",width:"1145",height:"610"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"These values are sensitive. Store them securely and rotate them regularly to maintain security best practices."})}),"\n",(0,s.jsx)(n.h2,{id:"github-configuration",children:"GitHub Configuration"}),"\n",(0,s.jsx)(n.p,{children:"Next, configure GitHub to store the secrets required by your pipeline. This will allow GitHub Actions to securely connect to Terraform Cloud."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Log in to GitHub and open your fork of the ",(0,s.jsx)(n.code,{children:"azure-devsecops-pipeline"})," repository."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Navigate to ",(0,s.jsx)(n.strong,{children:"Settings"})," \u2192 ",(0,s.jsx)(n.strong,{children:"Secrets and Variables"})," under the ",(0,s.jsx)(n.strong,{children:"Security"})," section."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Click ",(0,s.jsx)(n.strong,{children:"Actions"}),", then select ",(0,s.jsx)(n.strong,{children:"New Repository Secret"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Create a secret named:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"TF_API_TOKEN"})," \u2192 Paste in the Terraform Cloud API token you generated earlier."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsxs)(n.p,{children:["That\u2019s it! You\u2019ve successfully configured your secrets in ",(0,s.jsx)(n.strong,{children:"Terraform Cloud"})," and ",(0,s.jsx)(n.strong,{children:"GitHub"}),". With this step complete, your pipeline is now ready to authenticate, provision resources, and automate deployments securely."]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},3953:(e,n,i)=>{i.d(n,{A:()=>r});const r=i.p+"assets/images/image-111-5b1daec2bc402a87ee21ae49102e57a3.png"},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var r=i(6540);const s={},t=r.createContext(s);function o(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);